<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Firewall Defense</title>
  <link rel="stylesheet" href="style.css">
  <!-- Load p5.js and p5.play from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/p5@1.11.4/lib/p5.js"></script>
  <script src="https://p5play.org/v3/planck.min.js"></script>
  <script src="https://p5play.org/v3/p5play.min.js"></script>
</head>
<body>
  <div class="header-ui">
    <h1>Firewall Defense</h1>
    <div id="global-health-container">
      Global Firewall Integrity: <span id="global-health-value">Loading...</span>
    </div>
    <div id="motd-container" style="display: none;">
      <span id="motd-label">Message of the Day:</span> <span id="motd-value"></span>
    </div>
  </div>

  <div class="main-container">
    <div id="game-ui-left">
      <h2>Profile</h2>
      <div id="profile-info">
        <div>ID: <span id="player-id">...</span></div>
        <div>Tagline: <input type="text" id="tagline-input" /></div>
        <div>Color: <input type="color" id="color-input" /></div>
        <button id="profile-save-btn">Save Profile</button>
      </div>
      <hr>
      <h2>Top Defenders</h2>
      <ol id="leaderboard-list">
        <li>Loading...</li>
      </ol>
      <hr>
      <div id="player-score-section" style="margin-top: 15px;">
        <h3>Your Score</h3>
        <div id="player-total-score" style="font-size: 1.2em; font-weight: bold;">Loading...</div>
        <p style="font-size: 0.9em; color: #888;">Your cumulative total score for this period</p>
        <p id="leaderboard-reset-countdown" style="font-size: 0.85em; color: #666; margin-top: 8px;"></p>
      </div>
    </div>

    <div id="canvas-container">
      <!-- p5.js canvas will be inserted here by sketch.js -->
    </div>

    <div id="game-ui-right">
      <h2>Game Status</h2>
      <div id="game-status">Waiting to start...</div>
      
      <div id="difficulty-selector">
        <label for="difficulty">Difficulty:</label>
        <select id="difficulty">
          <option value="easy">Easy</option>
          <option value="medium" selected>Medium</option>
          <option value="hard">Hard</option>
        </select>
      </div>
      
      <div id="local-score">Score: 0</div>
      <div id="game-timer">Time: 60</div>
      <button id="start-game-btn">Start Game</button>
      
      <hr>
      <h2>Notifications</h2>
      <div id="notification-toast"></div>
    </div>
  </div>

  <!-- Load our game logic -->
  <!-- Optionally inject API URLs via environment variables before loading api.js -->
  <script>
    // These can be set via environment variable injection during deployment
    // Example: window.API_URL = 'https://api.example.com/api';
    // Example: window.WS_URL = 'wss://push.example.com/ws';
  </script>
  <script src="api.js"></script>
  <script src="sketch.js"></script>
</body>
</html>

